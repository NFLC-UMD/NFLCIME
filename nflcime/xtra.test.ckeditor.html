<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!--<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">-->
<html>
<head>
<script language="javascript" src="ckeditor 3.1/ckeditor_source.js"></script>
<script language="javascript" src="nflcime.js">

Modules:[
	{ id:'pers.cookie', activate:true },
	{ id:'ui.iframe', activate:true },
	{ id:'editor.ckeditor', activate:true },
	{ id:'rt.scrube', activate:true },
	{ id:'lang', activate:true }
],

UIModules:[
	{ id:'ui.trace', url:'xtra.ui.trace.html', options: { hAlign:'right', vAlign:'top', width:200, height:300 } }
]

</script>
<script>

function changeTextArea(id, info) {
	var attr = info.split(',');
	var lang = attr[0];
	var dir = attr[1];
	var ta = document.getElementById(id);
	ta.lang = lang;
	ta.style.direction = dir;
	
	if(ta.CKEditorDocument) {
		var doc = ta.CKEditorDocument;
		var body = doc.getBody();
		if(body) {
			var body_tag = body.$;
			if(body_tag) {
				body_tag.setAttribute('lang', lang);
				body_tag.style.direction = dir;
				if(body_tag.parentNode) {
					body_tag.parentNode.setAttribute('lang', lang);
				}
			}
		}
	}
}

window.onload = function() {
	var sel = document.getElementById('lang1');
	sel.onchange();
}

function onCKEditorInstanceReady(ckevt) {
	var doc = ckevt.editor.document;
	var textarea = ckevt.editor.element.$;
	if(doc && textarea) {
		var body = doc.getBody();
		if(body) {
			var body_tag = body.$;
			if(body_tag) {
				var lang = textarea.getAttribute('lang');
				var dir = textarea.style.direction;
				body_tag.setAttribute('lang', lang);
				body_tag.style.direction = dir;
				if(body_tag.parentNode) {
					body_tag.parentNode.setAttribute('lang', lang);
				}
			}
		}
		textarea.CKEditorDocument = doc;
	}
}

if(window.CKEDITOR) {
	window.CKEDITOR.on("instanceReady", this.onCKEditorInstanceReady, this, null, 1);		
}

function test() {
	var div = document.getElementById('container');
	div.style.display = (div.style.display == 'none') ? '' : 'none';
}

</script>
<style>

TEXTAREA {
	font-family: Arial Unicode MS;
	font-size: 150%;
	width: 50%;
	height: 8em;
}

</style>
</head>
<body>
<div id="container">
<textarea id="text1" class="ckeditor" lang="ru" NFLCIME="kb,cvt,rt"></textarea><br>
<select id="lang1" onchange="changeTextArea('text1', this.value)">
	<option value="sqi,ltr">Albanian</option>
	<option value="amh,ltr">Amharic</option>
	<option value="ara,rtl">Arabic</option>
	<option value="aze,ltr">Azeri</option>
	<option value="bam,ltr">Bambara</option>
	<option value="bal,rtl">Balochi</option>
	<option value="bel,ltr">Belarussian</option>
	<option value="ben,ltr">Bengali</option>
	<option value="brh,rtl">Brahui</option>
	<option value="bul,ltr">Bulgarian</option>
	<option value="mya,ltr">Burmese</option>
	<option value="che,ltr">Chechen</option>
	<option value="zho,ltr">Chinese</option>
	<option value="hrv,ltr">Croatian</option>
	<option value="ces,ltr">Czech</option>
	<option value="dan,ltr">Danish</option>
	<option value="prs,ltr">Dari</option>
	<option value="din,ltr">Dinka</option>
	<option value="nld,ltr">Dutch</option>
	<option value="est,ltr">Estonian</option>
	<option value="fas,rtl">Farsi</option>
	<option value="fra,ltr">French</option>
	<option value="kat,ltr">Georgian</option>
	<option value="ell,ltr">Greek</option>
	<option value="guj,ltr">Gujarati</option>
	<option value="hat,ltr">Haitian</option>
	<option value="mey,rtl">Hassaniyya Arabic</option>
	<option value="hau,ltr">Hausa</option>
	<option value="heb,rtl">Hebrew</option>
	<option value="hin,ltr">Hindi</option>
	<option value="hun,ltr">Hungarian</option>
	<option value="ibo,ltr">Igbo</option>
	<option value="acm,rtl">Iraqi Arabic</option>
	<option value="ita,ltr">Italian</option>
	<option value="kas,rtl">Kashmiri</option>
	<option value="kur,ltr">Kurdish</option>
	<option value="kmr,ltr">Kurmanji</option>
	<option value="kir,ltr">Kyrgyz</option>
	<option value="lav,ltr">Latvian</option>
	<option value="lit,ltr">Lithuanian</option>
	<option value="lao,ltr">Lao</option>
	<option value="mkd,ltr">Macedonian</option>
	<option value="mdh,ltr">Maguindanao</option>
	<option value="mrw,ltr">Maranao</option>	
	<option value="nor,ltr">Norwegian</option>	
	<option value="pus,rtl">Pashto</option>
	<option value="pol,ltr">Polish</option>
	<option value="pan,ltr">Punjabi (Eastern)</option>
	<option value="pnb,rtl">Punjabi (Western)</option>
	<option value="que,ltr">Quechua</option>
	<option value="ron,ltr">Romanian</option>
	<option value="rus,ltr">Russian</option>
	<option value="ssb,ltr">Sama</option>
	<option value="srp,ltr">Serbian</option>
	<option value="snd,rtl">Sindhi</option>
	<option value="skr,rtl">Siraiki</option>
	<option value="slk,ltr">Slovak</option>
	<option value="slv,ltr">Slovene</option>
	<option value="ckb,rtl">Sorani</option>
	<option value="apd,ltr">Sudanese</option>
	<option value="swe,ltr">Swedish</option>
	<option value="tgl,ltr">Tagalog</option>
	<option value="tha,ltr">Thai</option>
	<option value="tir,ltr">Tigrinya</option>
	<option value="tur,ltr">Turkish</option>
	<option value="tuk,ltr">Turkmen</option>
	<option value="ukr,ltr">Ukrainian</option>
	<option value="urd,rtl">Urdu</option>
	<option value="uzb,ltr">Uzbek</option>
	<option value="wol,ltr">Wolof</option>
	<option value="vie,ltr">Vietnamese</option>	
	<option value="yka,ltr">Yakan</option>
	<option value="yor,ltr">Yoruba</option>
</select>
</div>
<button onclick="test()">Toggle</button>
</body>
</html>
